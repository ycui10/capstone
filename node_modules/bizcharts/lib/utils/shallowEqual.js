"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = _default;

var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));

var _each2 = _interopRequireDefault(require("@antv/util/lib/each"));

var _isArray2 = _interopRequireDefault(require("@antv/util/lib/is-array"));

var _isObject2 = _interopRequireDefault(require("@antv/util/lib/is-object"));

function is(x, y) {
  if (x === y) {
    return x !== 0 || y !== 0 || 1 / x === 1 / y;
  }

  return x !== x && y !== y; //  NaN == NaN
}

function length(obj) {
  if ((0, _isArray2["default"])(obj)) {
    return obj.length;
  }

  if ((0, _isObject2["default"])(obj)) {
    return Object.keys(obj).length;
  }

  return 0;
}

function _default(objA, objB) {
  if (is(objA, objB)) {
    return true;
  }

  if ((0, _typeof2["default"])(objA) !== 'object' || objA === null || (0, _typeof2["default"])(objB) !== 'object' || objB === null) {
    return false;
  }

  if ((0, _isArray2["default"])(objA) !== (0, _isArray2["default"])(objB)) {
    return false;
  }

  if (length(objA) !== length(objB)) {
    return false;
  }

  var ret = true;
  (0, _each2["default"])(objA, function (v, k) {
    if (!is(v, objB[k])) {
      ret = false;
      return ret;
    }

    return true;
  });
  return ret;
}