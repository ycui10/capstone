"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _each2 = _interopRequireDefault(require("@antv/util/lib/each"));

var _isArray2 = _interopRequireDefault(require("@antv/util/lib/is-array"));

var _shallowEqual2 = _interopRequireDefault(require("./shallowEqual"));

/**
 * 对比不一致则执行回调
*/
var _default = function _default(preProps, nextProps, keys, callback) {
  // preProps 为null 即初始化。
  if (preProps === null) {
    (0, _each2["default"])(keys, function (key) {
      var value = nextProps[key];

      if (value !== undefined) {
        if (!(0, _isArray2["default"])(value)) {
          value = [value];
        }

        callback(value, key);
      }
    });
    return;
  }

  var value;
  var nextValue;
  (0, _each2["default"])(keys, function (key) {
    value = preProps[key];
    nextValue = nextProps[key];

    if (!(0, _shallowEqual2["default"])(nextValue, value)) {
      if (!(0, _isArray2["default"])(nextValue)) {
        nextValue = [nextValue];
      }

      callback(nextValue, key);
    }
  });
};

exports["default"] = _default;