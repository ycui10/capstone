{"version":3,"file":"liquid-statistic.js","sourceRoot":"","sources":["../../../../src/plots/liquid/component/liquid-statistic.ts"],"names":[],"mappings":";;;AAAA,mCAAoC;AAEpC,oFAA8E;AAE9E,2DAAmD;AAOnD;IAA2C,yCAAa;IAMtD,uBAAY,GAAmB;QAA/B,YACE,kBAAM,GAAG,CAAC,SAKX;QAJC,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;QACrB,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;QACrB,KAAI,CAAC,cAAc,GAAG,GAAG,CAAC,cAAc,CAAC;QACzC,KAAI,CAAC,aAAa,EAAE,CAAC;;IACvB,CAAC;IAED,aAAa;IACH,0CAAkB,GAA5B;QACE,IAAM,kBAAkB,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACnD,IAAA,KAA2B,IAAI,CAAC,IAAI,CAAC,OAAO,EAA1C,aAAS,EAAT,KAAK,mBAAG,CAAC,KAAA,EAAE,SAAS,eAAsB,CAAC;QACnD,IAAI,SAAS,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YACnC,OAAO,kBAAkB,CAAC;SAC3B;QACD,IAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QACpD,IAAI,aAAM,CAAC,WAAW,EAAE,gBAAgB,CAAC,EAAE;YACzC,kBAAkB,CAAC,WAAW,CAAC,WAA6B,CAAC,CAAC;SAC/D;aAAM;YACL,kBAAkB,CAAC,SAAS,GAAG,gCAAW,CAAC,WAAqB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;SACxF;QAED,OAAO,kBAAkB,CAAC;IAC5B,CAAC;IAES,qCAAa,GAAvB;QACE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAChC,IAAA,KAAgC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAtD,IAAI,UAAA,EAAE,IAAI,UAAA,EAAE,KAAK,WAAA,EAAE,MAAM,YAA6B,CAAC;QAC/D,IAAI,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;QAC1B,IAAI,CAAC,CAAC,GAAG,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC;IAC7B,CAAC;IACH,oBAAC;AAAD,CAAC,AArCD,CAA2C,mBAAa,GAqCvD","sourcesContent":["import { isType } from '@antv/util';\nimport { View } from '../../../dependents';\nimport StatisticHtml, { IStatisticHtml } from '../../../components/statistic';\nimport Liquid, { LiquidViewConfig } from '../layer';\nimport { getTemplate } from './statistic-template';\n\ninterface IRingStatistic extends IStatisticHtml {\n  view: View;\n  plot: any;\n}\n\nexport default class RingStatistic extends StatisticHtml {\n  protected view: View;\n  protected plot: Liquid;\n  protected statisticClass: string;\n  protected options: LiquidViewConfig['statistic'];\n\n  constructor(cfg: IRingStatistic) {\n    super(cfg);\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    this.statisticClass = cfg.statisticClass;\n    this.adjustOptions();\n  }\n\n  /** 中心文本显示 */\n  protected getTotalHtmlString(): HTMLDivElement {\n    const statisticContainer = document.createElement('div');\n    const { value = 0, statistic } = this.plot.options;\n    if (statistic && !statistic.visible) {\n      return statisticContainer;\n    }\n    const htmlContent = this.options.htmlContent(value);\n    if (isType(htmlContent, 'HTMLDivElement')) {\n      statisticContainer.appendChild(htmlContent as HTMLDivElement);\n    } else {\n      statisticContainer.innerHTML = getTemplate(htmlContent as string, this.statisticClass);\n    }\n\n    return statisticContainer;\n  }\n\n  protected adjustOptions() {\n    this.html = this.getTotalHtmlString();\n    const { minX, minY, width, height } = this.view.coordinateBBox;\n    this.x = minX + width / 2;\n    this.y = minY + height / 2;\n  }\n}\n"]}